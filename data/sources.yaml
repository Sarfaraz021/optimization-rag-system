# Data sources configuration for Optimization RAG System
# This file defines the trusted sources for cloud cost optimization knowledge

sources:
  # AWS Sources
  - name: "AWS Cost Optimization Pillar"
    url: "https://docs.aws.amazon.com/wellarchitected/latest/cost-optimization-pillar/design-principles.html"
    type: "documentation"
    provider: "AWS"
    priority: 1
    description: "AWS Well-Architected Framework cost optimization design principles"
    
  - name: "AWS S3 Storage Classes"
    url: "https://aws.amazon.com/s3/storage-classes/"
    type: "documentation"
    provider: "AWS"
    priority: 1
    description: "AWS S3 storage classes for cost optimization"
    
  - name: "AWS EC2 Pricing"
    url: "https://aws.amazon.com/ec2/pricing/"
    type: "documentation"
    provider: "AWS"
    priority: 1
    description: "AWS EC2 pricing models and optimization strategies"
    
  - name: "AWS Cost Optimization Blog"
    url: "https://aws.amazon.com/blogs/aws-cloud-financial-management/tag/cost-optimization/"
    type: "blog"
    provider: "AWS"
    priority: 2
    description: "AWS cost optimization blog posts and case studies"
    
  # Azure Sources
  - name: "Azure Cost Management Best Practices"
    url: "https://learn.microsoft.com/en-us/azure/cost-management-billing/costs/cost-mgt-best-practices"
    type: "documentation"
    provider: "Azure"
    priority: 1
    description: "Microsoft Azure cost management and optimization best practices"
    
  - name: "Azure Advisor Cost Recommendations"
    url: "https://learn.microsoft.com/en-us/azure/advisor/advisor-cost-recommendations"
    type: "documentation"
    provider: "Azure"
    priority: 1
    description: "Azure Advisor automated cost optimization recommendations"
    
  - name: "Azure Storage Cost Optimization"
    url: "https://learn.microsoft.com/en-us/azure/storage/common/storage-plan-manage-costs"
    type: "documentation"
    provider: "Azure"
    priority: 1
    description: "Azure Storage cost planning and optimization strategies"
    
  # GCP Sources
  - name: "GCP Cost Optimization Best Practices"
    url: "https://cloud.google.com/blog/topics/cost-management/best-practices-for-optimizing-your-cloud-costs"
    type: "blog"
    provider: "GCP"
    priority: 1
    description: "Google Cloud Platform cost optimization best practices"
    
  - name: "GCP Cloud Storage Cost Optimization"
    url: "https://cloud.google.com/storage/docs/storage-classes"
    type: "documentation"
    provider: "GCP"
    priority: 1
    description: "Google Cloud Storage classes and cost optimization"
    
  - name: "GCP Compute Engine Pricing"
    url: "https://cloud.google.com/compute/docs/instances/creating-instance-with-custom-machine-type"
    type: "documentation"
    provider: "GCP"
    priority: 1
    description: "Google Compute Engine custom machine types and pricing optimization"

  # Additional High-Value Sources
  - name: "AWS Reserved Instances Guide"
    url: "https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/ec2-reserved-instances.html"
    type: "documentation"
    provider: "AWS"
    priority: 1
    description: "AWS Reserved Instances for cost optimization"
    
  - name: "AWS Spot Instances Best Practices"
    url: "https://docs.aws.amazon.com/AWSEC2/latest/UserGuide/spot-best-practices.html"
    type: "documentation"
    provider: "AWS"
    priority: 1
    description: "AWS Spot Instances cost optimization strategies"
    
  - name: "Azure Reserved VM Instances"
    url: "https://learn.microsoft.com/en-us/azure/virtual-machines/prepay-reserved-vm-instances"
    type: "documentation"
    provider: "Azure"
    priority: 1
    description: "Azure Reserved VM Instances for cost savings"
    
  - name: "Azure Spot Virtual Machines"
    url: "https://learn.microsoft.com/en-us/azure/virtual-machines/spot-vms"
    type: "documentation"
    provider: "Azure"
    priority: 1
    description: "Azure Spot VMs pricing and best practices"
    
  - name: "GCP Committed Use Discounts"
    url: "https://cloud.google.com/compute/docs/instances/committed-use-discounts-overview"
    type: "documentation"
    provider: "GCP"
    priority: 1
    description: "GCP Committed Use Discounts for compute savings"
    
  - name: "GCP Preemptible VM Instances"
    url: "https://cloud.google.com/compute/docs/instances/preemptible"
    type: "documentation"
    provider: "GCP"
    priority: 1
    description: "GCP Preemptible VMs for cost optimization"
    
  - name: "AWS Lambda Cost Optimization"
    url: "https://docs.aws.amazon.com/lambda/latest/dg/lambda-concurrency.html"
    type: "documentation"
    provider: "AWS"
    priority: 2
    description: "AWS Lambda pricing and optimization strategies"
    
  - name: "Azure Functions Cost Optimization"
    url: "https://learn.microsoft.com/en-us/azure/azure-functions/functions-consumption-costs"
    type: "documentation"
    provider: "Azure"
    priority: 2
    description: "Azure Functions consumption and cost optimization"
    
  - name: "GCP Cloud Functions Pricing"
    url: "https://cloud.google.com/functions/pricing"
    type: "documentation"
    provider: "GCP"
    priority: 2
    description: "Google Cloud Functions pricing optimization"
    
  - name: "AWS RDS Cost Optimization"
    url: "https://docs.aws.amazon.com/AmazonRDS/latest/UserGuide/CHAP_BestPractices.html"
    type: "documentation"
    provider: "AWS"
    priority: 2
    description: "AWS RDS database cost optimization best practices"
    
  - name: "Azure SQL Database Cost Optimization"
    url: "https://learn.microsoft.com/en-us/azure/azure-sql/database/cost-management"
    type: "documentation"
    provider: "Azure"
    priority: 2
    description: "Azure SQL Database cost management and optimization"
    
  - name: "GCP Cloud SQL Cost Optimization"
    url: "https://cloud.google.com/sql/docs/mysql/optimize-costs"
    type: "documentation"
    provider: "GCP"
    priority: 2
    description: "Google Cloud SQL cost optimization strategies"
    
  # Third-party and Community Sources
  - name: "FinOps Foundation Best Practices"
    url: "https://www.finops.org/introduction/what-is-finops/"
    type: "documentation"
    provider: "FinOps"
    priority: 2
    description: "FinOps framework and cloud cost management best practices"
    
  - name: "Cloud Cost Optimization Guide - Cloudability"
    url: "https://www.cloudability.com/blog/cloud-cost-optimization/"
    type: "blog"
    provider: "Third-party"
    priority: 2
    description: "Third-party cloud cost optimization insights and strategies"

# Vector Database Configuration
vector_db:
  type: "pgvector"  # Options: chromadb, faiss, pgvector
  connection: "postgresql+psycopg://langchain:langchain@localhost:6024/langchain"
  collection_name: "cloud_cost_optimization"

# Ingestion configuration
ingestion:
  chunk_size: 400  # tokens (300-500 range as specified)
  chunk_overlap: 50  # tokens
  max_chunks_per_source: 1000
  batch_size: 50
  rate_limit_delay: 1  # seconds between batches
  
# Embedding configuration (aligned with retrieval_pipeline.py)
embedding:
  model: "text-embedding-3-small"  # OpenAI model used in pipeline
  dimension: 1536  # OpenAI embedding dimensions
  api_provider: "openai"
  
# Reranking configuration
reranking:
  model: "cross-encoder/ms-marco-MiniLM-L6-v2"
  enabled: true
  top_k_candidates: 20  # Candidates for reranking
  final_top_k: 5  # Final results returned

# API Configuration
api:
  host: "0.0.0.0"
  port: 8000
  reload: true
  log_level: "info"
  cors_origins: ["*"]

# Evaluation Configuration
evaluation:
  enabled: true
  test_queries_file: "eval/gold_labels.jsonl"
  metrics: ["recall_at_k", "mrr"]
  recall_k_values: [1, 3, 5, 10]

